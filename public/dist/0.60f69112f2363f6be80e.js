webpackJsonp([0],{233:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){for(var t=[],n=0;n<2;n++)t=t.concat(e);return t}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),f=n(554),p=r(f),h=n(553),m=r(h),b=["http://new-img2.ol-img.com/985x695/117/362/li2sIrLbBDCQM.jpg","http://pic1.win4000.com/wallpaper/c/53b102c707232.jpg","http://img001.21cnimg.com/photos/album/20140217/m320/DCEA3446660B2EC418ECA4E1A459933F.jpeg","http://pic22.8bo.com:8201/npicture/2014/217/9L9NCRTM4TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9GOJG14TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9L56SM4TM10005.jpg","http://new-img2.ol-img.com/985x695/117/362/li2sIrLbBDCQM.jpg","http://pic1.win4000.com/wallpaper/c/53b102c707232.jpg","http://img001.21cnimg.com/photos/album/20140217/m320/DCEA3446660B2EC418ECA4E1A459933F.jpeg","http://pic22.8bo.com:8201/npicture/2014/217/9L9NCRTM4TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9GOJG14TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9L56SM4TM10005.jpg","http://new-img2.ol-img.com/985x695/117/362/li2sIrLbBDCQM.jpg","http://pic1.win4000.com/wallpaper/c/53b102c707232.jpg","http://img001.21cnimg.com/photos/album/20140217/m320/DCEA3446660B2EC418ECA4E1A459933F.jpeg","http://pic22.8bo.com:8201/npicture/2014/217/9L9NCRTM4TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9GOJG14TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9L56SM4TM10005.jpg","http://new-img2.ol-img.com/985x695/117/362/li2sIrLbBDCQM.jpg","http://pic1.win4000.com/wallpaper/c/53b102c707232.jpg","http://img001.21cnimg.com/photos/album/20140217/m320/DCEA3446660B2EC418ECA4E1A459933F.jpeg","http://pic22.8bo.com:8201/npicture/2014/217/9L9NCRTM4TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9GOJG14TM10005.jpg","http://pic22.8bo.com:8201/npicture/2014/217/9L9L56SM4TM10005.jpg"],d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={data:b},n}return a(t,e),c(t,[{key:"render",value:function(){var e=this;return s.default.createElement("div",null,s.default.createElement("div",{style:{margin:"50px 70px"}},s.default.createElement(p.default,{items:this.state.data,renderItem:function(e,t){return s.default.createElement(m.default,{data:e,onMeasured:t})}})),s.default.createElement("div",{onClick:function(){e.setState({data:u(e.state.data)})}},"点击增加更多"))}}]),t}(s.default.Component);t.default=d},553:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"onImageLoaded",value:function(){var e=this.props.onMeasured;e(this.box.offsetWidth,this.box.offsetHeight)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data;t.onMeasured;return l.default.createElement("div",{ref:function(t){return e.box=t},className:"item-box"},l.default.createElement("img",{src:n,className:"item-cover",onLoad:function(){return e.onImageLoaded()}}),l.default.createElement("div",{className:"info-box"},l.default.createElement("p",{className:"url"},n),l.default.createElement("p",null,"some",l.default.createElement("br",null),"other",l.default.createElement("br",null),"stuff",l.default.createElement("br",null),".....",l.default.createElement("br",null))))}}]),t}(l.default.Component);t.default=s},554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(556),o=n.n(r);t.default=o.a},555:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;u=l=c=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var c=u.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return;e=l,t=i,n=a,r=!0}},l=n(0),s=r(l),f=function(e){function t(){o(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.maxNumberOfCols,r=t.index,o=t.layout,i=o?{visibility:"visible",position:"absolute",top:o.top,left:o.left}:n>-1&&r<n?{visibility:"visible",float:"left",position:"relative"}:{};return s.default.createElement("div",{ref:function(t){return e.itemBox=t},style:a({},p.itemBox,i)},this.props.children)}}]),t}(s.default.Component);t.default=f;var p={itemBox:{visibility:"hidden",position:"absolute"}};e.exports=t.default},556:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;u=l=c=void 0,r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var c=u.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return;e=l,t=i,n=a,r=!0}},s=n(0),f=r(s),p=n(555),h=r(p);Array.prototype.minValue=function(){for(var e=0,t=0;t<this.length;t++)this[t]<this[e]&&(e=t);return{index:e,value:this[e]}},Array.prototype.maxValue=function(){for(var e=0,t=0;t<this.length;t++)this[t]>this[e]&&(e=t);return{index:e,value:this[e]}};var m=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={maxNumberOfCols:-1,childrenLayouts:{},containerWidth:0,containerHeight:0},this.childrenSizes={}}return a(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",function(){e.caculateNumberOfCols()})}},{key:"caculateNumberOfCols",value:function(){var e=this.container.offsetWidth,t=this.childrenSizes[Object.keys(this.childrenSizes)[0]].width;if(parseInt(e/t)!==this.maxNumberOfCols){var n=!1;this.maxNumberOfCols&&(n=!0),this.maxNumberOfCols=parseInt(e/t),this.setState({maxNumberOfCols:this.maxNumberOfCols,containerWidth:this.maxNumberOfCols*t}),n&&this.caculateChildrenPosition()}}},{key:"caculateChildrenPosition",value:function(){var e=this;if(this.maxNumberOfCols!==-1){for(var t=[],n={},r=0;r<this.maxNumberOfCols;r++)t[r]=0;Object.keys(this.childrenSizes).forEach(function(r){var i=e.childrenSizes[0].width;n=Object.assign({},n,o({},r,{left:t.minValue().index*i,top:t.minValue().value})),t[t.minValue().index]=t.minValue().value+e.childrenSizes[r].height}),this.setState({childrenLayouts:n,containerHeight:t.maxValue().value})}}},{key:"setChildSize",value:function(e){var t=e.index,n=e.height,r=e.width,i=this.props.items;this.childrenSizes=Object.assign({},this.childrenSizes,o({},t,{width:r,height:n})),this.state.maxNumberOfCols===-1&&this.caculateNumberOfCols(),Object.keys(this.childrenSizes).length===i.length&&this.caculateChildrenPosition()}},{key:"render",value:function(){var e=this,t=this.props,n=t.renderItem,r=t.items,o=this.state,i=o.maxNumberOfCols,a=o.childrenLayouts,c=o.containerWidth,l=o.containerHeight,s=c&&l?{width:c,height:l}:{};return f.default.createElement("div",{style:b.cot,ref:function(t){return e.container=t}},f.default.createElement("div",{style:u({},b.box,s)},(r||[]).map(function(t,r){return f.default.createElement(h.default,{index:r,key:r,layout:a[r],maxNumberOfCols:i},n(t,function(t,n){e.setChildSize({index:r,height:n,width:t})}))})))}}]),t}(f.default.Component);t.default=m;var b={cot:{margin:"0 auto",position:"relative"},box:{width:"100%",position:"relative",margin:"auto"}};e.exports=t.default}});